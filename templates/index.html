<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube Cutter & Downloader</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="app">
    <header>
      <div class="logo">
        <span class="logo-icon">▶</span>
        <span>YT Cutter</span>
      </div>
      <div class="header-actions">
        <button id="theme-toggle" class="btn btn-ghost btn-sm" title="Toggle light/dark mode">☀️</button>
      </div>
    </header>

    <main>
      <!-- URL input -->
      <section class="card url-card">
        <label class="label">YouTube URL</label>
        <div class="url-row">
          <input id="url-input" type="url" placeholder="https://www.youtube.com/watch?v=..." list="url-history" autocomplete="off" />
          <datalist id="url-history"></datalist>
          <button id="fetch-btn" class="btn btn-primary">Fetch Info</button>
          <button id="clear-history-btn" class="btn btn-ghost btn-sm" title="Clear URL history">Clear</button>
        </div>
      </section>

      <!-- Video info -->
      <section class="card info-card hidden" id="info-card">
        <div class="video-meta">
          <img id="thumb" src="" alt="thumbnail" class="thumb" />
          <div class="meta-text">
            <div id="vid-title" class="vid-title"></div>
            <div id="vid-channel" class="vid-channel"></div>
            <div id="vid-duration" class="vid-duration"></div>
          </div>
        </div>
      </section>

      <!-- YouTube Preview -->
      <section class="card preview-card hidden" id="preview-card">
        <label class="label">Preview</label>
        <div class="preview-wrap">
          <iframe id="preview-iframe" src="" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>
        <p class="hint" style="margin-top:8px">Updates as you change start/end times</p>
      </section>

      <!-- Options -->
      <section class="card options-card hidden" id="options-card">
        <div class="options-grid">

          <!-- Quality -->
          <div class="option-group">
            <label class="label">Quality</label>
            <select id="quality-select"></select>
            <span id="size-hint" class="hint"></span>
          </div>

          <!-- Cut -->
          <div class="option-group" id="cut-group">
            <label class="label">Clip (optional)</label>

            <!-- Timeline scrubber -->
            <div class="timeline-scrubber" id="timeline-scrubber">
              <div class="timeline-track">
                <div class="timeline-range" id="timeline-range"></div>
              </div>
              <input type="range" id="scrubber-start" class="scrubber-input" min="0" max="1000" value="0" step="1" />
              <input type="range" id="scrubber-end"   class="scrubber-input" min="0" max="1000" value="1000" step="1" />
            </div>

            <div class="time-row">
              <div class="time-field">
                <span class="time-label">Start</span>
                <div class="time-input-wrap">
                  <input id="start-time" type="text" placeholder="00:00" />
                  <div class="time-spinners">
                    <button class="time-spin-btn" data-target="start-time" data-delta="1">▲</button>
                    <button class="time-spin-btn" data-target="start-time" data-delta="-1">▼</button>
                  </div>
                </div>
              </div>
              <div class="time-sep">→</div>
              <div class="time-field">
                <span class="time-label">End</span>
                <div class="time-input-wrap">
                  <input id="end-time" type="text" placeholder="01:30" />
                  <div class="time-spinners">
                    <button class="time-spin-btn" data-target="end-time" data-delta="1">▲</button>
                    <button class="time-spin-btn" data-target="end-time" data-delta="-1">▼</button>
                  </div>
                </div>
              </div>
            </div>
            <p class="hint">MM:SS or HH:MM:SS — works for both video and audio</p>
          </div>

        </div>

        <button id="download-btn" class="btn btn-download">Download</button>
      </section>

      <!-- Downloads queue -->
      <section id="queue-section" class="queue-section hidden">
        <div class="queue-header">
          <span class="label" style="margin-bottom:0">Downloads</span>
          <button id="clear-done-btn" class="btn btn-ghost btn-sm">Clear done</button>
        </div>
        <div id="queue-list"></div>
      </section>

      <!-- Download history -->
      <section class="card hidden" id="history-section">
        <div class="history-header">
          <span class="label" style="margin-bottom:0">History</span>
          <button id="clear-dl-history-btn" class="btn btn-ghost btn-sm">Clear</button>
        </div>
        <div id="history-list"></div>
      </section>

      <!-- Fetch error -->
      <section class="card error-card hidden" id="error-card">
        <div class="error-icon">✕</div>
        <div id="error-msg" class="error-msg"></div>
        <button id="retry-btn" class="btn btn-ghost">Try again</button>
      </section>
    </main>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
